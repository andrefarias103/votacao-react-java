generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://root:root@localhost:5432/db_votacao_pautas?schema=public"
}

model Usuario {
        id          Int      @id @default(autoincrement())
        login       String
        senha       String
        nome        String
        endereco    String
        email       String
        cpf         String
        tipo        String
        votacao     Votacao? @relation("votacao", fields: [votacaoId], references: [id], onDelete: Cascade)
        votacaoId   Int
        createdAt   DateTime @default(now())
        updatedAt   DateTime @default(now())
        deletedAt   DateTime @default(now())
}

model Votacao {
        id           Int        @id @default(autoincrement())
        usuario      Usuario[]  @relation("votacao")
        opcaoVotada  String     @default("NÃ£o")   
        dataHoraVoto String
        pauta        Pauta      @relation("pauta", fields: [pautaId], references: [id], onDelete: Cascade)
        pautaId      Int
}

model Pauta {
        id          Int        @id @default(autoincrement())
        titulo      String     
        descricao   String
        categoria   Categoria?  @relation("categoria", fields: [categoriaId], references: [id], onDelete: Cascade)
        categoriaId Int        
        sessaoId    Int?     @unique
        sessao      Sessao?
        votacao     Votacao[]  @relation("pauta")
        createdAt   DateTime @default(now())
        updatedAt   DateTime @default(now())
        deletedAt   DateTime @default(now())        
}
model Categoria {
        id          Int      @id @default(autoincrement())
        nome        String   @unique
        descricao   String
        pautas      Pauta[]  @relation("categoria") 
        createdAt   DateTime @default(now())
        updatedAt   DateTime @default(now())
        deletedAt   DateTime @default(now())
}

model Sessao {
        id          Int      @id @default(autoincrement())          
        pauta       Pauta? @relation(fields: [pautaId], references: [id])
        pautaId     Int?   @unique
        dataHoraInicio   String
        dataHoraFim   String
        status      String
        createdAt   DateTime @default(now())
        updatedAt   DateTime @default(now())
        deletedAt   DateTime @default(now())          


}





